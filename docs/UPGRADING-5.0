=head1 Upgrading to 5.0

The following describes some of the more significant changes
to RTIR 5.0 from earlier versions. The other UPGRADING documents contain
details for previous versions.

Also read the general L<UPGRADING> document for the steps to upgrade from
a previous version of RTIR.

=head2 Notable Changes

=over

=item *

In RTIR 4.0, we modified the menu display to move each queue to a
top level menu item when working inside RTIR. Each menu ended up
having only a single "Create" entry and we haven't found new menu items
to add for each queue. This change made it harder to access the
default RT menus, so we have reverted to the previous configuration
with a single RTIR menu item containing relevant links.

To make it easier to access the RTIR menu, and to keep it in a
consistent location, we moved it to the left, directly after
the default RT Home menu.

=item *

To align with RT's create pages we removed the modal to select queue
before the create page and now give users the option to select
queue directly on create. CreateInQueue.html still remains available
in case users are linking directly to it but now logs a deprecated
warning when accessed.

CreateInQueue.html will be removed in a future version of RTIR.
Please update any links directly accessing CreateInQueue.html to
instead link to RTIR/Create.html or RTIR/Incident/Create.html.

=item *

Previous versions of RTIR set RT's DefaultQueue option to Incident Reports.
The new versions of RT and RTIR move the queue selection to the create page
from the top action, so a new RTIR_DefaultQueue option is now available to
set the default queue for RTIR create ticket pages.

With this new RTIR-specific option, RTIR no longer automatically sets RT's
DefaultQueue. You can still set it manually for your system via the RT
configuration.

=item *

The RTIR search page has been re-worked to use RT's base search features
more directly. This gives RTIR full access to current and future search
and reporting features added to RT.

We have retained the features associated with the custom RTIR search
interface including limiting queue selection to RTIR queues and providing
some additional RTIR menu options.

On the previous RTIR search, the Advanced and Bulk Update menu options were
hidden. Visibility of these two menus is now managed with a new right in
RT. The RT 5.0 upgrade process grants these rights to all Privileged users,
but you can revoke these rights to restore the previous RTIR menu.

=item *

On RTIR at a glance, the default configuration for Incident sections now
includes Priority. Priority is also now a second-level sort, so Incidents
will be ordered first by Due date (most Due first), then by Priority (highest
priority first).

RT 5.0 now defaults to managing priority with set values like "High" and "Low"
rather than numbers, so you will see that in RTIR also. See the RT upgrade
notes for details on how to set your Priority levels and for how to revert
to number-based priority if you prefer.

If you don't use Priority on Incidents, you can customize the search result
columns with the "DueIncidents" entry in the C<%RTIRSearchResultFormats>
configuration.

=item *

The Updates column in Incident ticket listings on RTIR at a glance now shows
the number of unread messages on the Incident ticket rather than just Yes/No.
As with Priority above, this setting can be customized with the "DueIncidents"
entry in C<%RTIRSearchResultFormats>. The previous option was called UpdateStatus
and the new version is UnreadMessages.

=item *

Default values for RTIR custom fields previously set using the configuration
option C<%RTIR_CustomFieldsDefaults> are now set using RT's core custom
field default value feature. If you had defaults previously set, they will
be migrated automatically during upgrade.

RT supports setting these defaults both in the custom field configuration,
which will set a default for all queues, and in the queue configuration
for each individual queue.

C<%RTIR_CustomFieldsDefaults> now sets default values only for "Resolution"
because the Resolution values are set based on the status of the
Incident when closed.

=item *

On Incidents, the linked tickets for Incident Reports, Investigations, and
Countermeasures are now controlled via the new
L<LinkedQueuePortlets|https://docs.bestpractical.com/rt/5.0.0/RT_Config.html#LinkedQueuePortlets>
feature in RT. If you previously modified the format of the link display
on the Incidents page using C<%RTIRSearchResultFormats> for C<ChildReport>,
C<ChildInvestigation>, or C<ChildCountermeasure>, you can copy that configuration
to the new C<%LinkedQueuePortletFormats> option.

=item *

Before RTIR 4.0 you could launch an incident and investigation on a single page.
This feature was removed in RTIR 4.0, but has been restored in RTIR 5.0.0. It
has also been updated to allow the queue for each section to be selected on
the create page.

=back

=head1 UPGRADING FROM RTIR 5.0.0 AND EARLIER

=over 4

=item *

RTIR display pages now support inline edit, similar to the core RT feature.
The configuration option C<%InlineEditPanelBehavior>, as documented in
RT, allows you to set the edit behavior. To set different behavior for
RTIR, you can use the key C<RTIR::Ticket> with the same format as that
documented for C<RT::Ticket>.

=back

=head1 UPGRADING FROM 5.0.1 AND EARLIER

=over 4

=item * "RTIR at a glance" is now a dashboard

"RTIR at a glance" previously could be customized and was stored as
a special configuration used just for the RTIR homepage.
It is now a dashboard just like other dashboards in RT.
With this update, you can now easily change your entire RTIR homepage
by selecting a different dashboard to be your default homepage.
This update aligns with RT where a similar change was made in RT 5.0.2.

After upgrading, RTIR at a glance should look the same as it did
previously, but there are various changes in how it is managed.

The previous global RTIR at a glance page is converted to a new System
dashboard called "RTIR Homepage". Individual users with a custom homepage
will see a new dashboard in "My Dashboards" called "RTIR Homepage". These are
regular dashboards now, so the names can be changed if desired.

The gears icon on the RTIR homepage now links to a page that displays all
available dashboards and users can select their default homepage from
the list. To customize, users can create a new dashboard. The privacy
of dashboards can be set to an individual user, a group, or system-wide,
depending on the user's rights. This makes it easy to set up and share
useful RTIR homepage configurations.

Users who want to customize their homepage need the rights "ModifySelf",
"CreateOwnDashboard", "DeleteOwnDashboard", "ModifyOwnDashboard" and
"SeeOwnDashboard". All users who have "ModifySelf" are automatically granted
these dashboard rights as part of the RT 5.0.2 upgrade. You can modify
these rights as desired if you don't want users to be able to create dashboards.

All users can see the default System dashboard set for RTIR. If you
want to allow users to see other System dashboards, grant the
"SeeDashboard" right. This is not done automatically with the upgrade.

=back

=cut
